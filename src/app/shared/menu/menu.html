<nav class="navbar navbar-expand-lg navbar-dark bg-dark px-3">
  <!-- Logo que redirige al home según rol -->
  @if (auth.user$ | async; as user) {
    <a class="navbar-brand" [routerLink]="auth.getUserRole() ? auth.getHomeRouteByRole(auth.getUserRole()) : '/'">
      Trainplanner
    </a>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="nav" class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto">

        <!-- Siempre visible -->
        <li class="nav-item">
          <a class="nav-link" [routerLink]="auth.getUserRole() ? auth.getHomeRouteByRole(auth.getUserRole()) : '/'">Inicio</a>
        </li>

        <li class="nav-item">
          <a class="nav-link" routerLink="/perfil">Perfil</a>
        </li>

        <!-- Opciones según usuario -->
        <!-- TRAINER -->
        @if (auth.getUserRole() === 'trainer') {
          <li class="nav-item">
            <a class="nav-link" routerLink="/entrenador/ejercicios" routerLinkActive="active">
              <i class="fas fa-dumbbell me-2"></i>Ver Ejercicios
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/entrenador/rutinas">Rutinas</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/entrenador/trainees">Mis Trainees</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/entrenador/chat">Chat</a>
          </li>
        }

        <!-- TRAINEE -->
        @if (auth.getUserRole() === 'trainee') {
          <li class="nav-item">
            <a class="nav-link" routerLink="/trainee/rutinas">Mis rutinas</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/trainee/chat">Chat con Entrenador</a>
          </li>
        }
        
        <!-- ADMIN -->
        @if (auth.getUserRole() === 'admin') {
          <li class="nav-item">
            <a class="nav-link" routerLink="/admin/usuarios">Usuarios</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/admin/ejercicios" routerLinkActive="active">
              <i class="fas fa-dumbbell me-2"></i>Gestión de Ejercicios
            </a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/admin/rutinas">Rutinas</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" routerLink="/admin/asignaciones">Asignaciones</a>
          </li>
        }
      </ul>

      <ul class="navbar-nav">
        <li class="nav-item">
          <span class="navbar-text text-white me-2">
            Hola, {{ user.name }}
          </span>
        </li>

        <li class="nav-item">
          <button class="btn btn-outline-light btn-sm" (click)="logout()">
            Cerrar sesión
          </button>
        </li>
      </ul>
    </div>
  } @else {
    <!-- Usuario NO logueado -->
    <a class="navbar-brand" routerLink="/">Trainplanner</a>
    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="nav" class="collapse navbar-collapse">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a class="nav-link" routerLink="/">Inicio</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" routerLink="/perfil">Perfil</a>
        </li>
      </ul>

      <ul class="navbar-nav">
        <li class="nav-item"><a class="nav-link" routerLink="/login">Login</a></li>
        <li class="nav-item"><a class="nav-link" routerLink="/register">Registro</a></li>
      </ul>
    </div>
  }
</nav>